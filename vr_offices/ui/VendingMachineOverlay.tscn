[gd_scene load_steps=5 format=3]

[ext_resource type="Script" path="res://vr_offices/ui/VendingMachineOverlay.gd" id="1"]
[ext_resource type="Script" path="res://vr_offices/ui/VrOfficesTeachSkillPopup.gd" id="2"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_1"]
bg_color = Color(0.06, 0.07, 0.08, 0.92)
border_color = Color(1, 1, 1, 0.08)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
corner_radius_top_left = 14
corner_radius_top_right = 14
corner_radius_bottom_left = 14
corner_radius_bottom_right = 14
content_margin_left = 14
content_margin_top = 14
content_margin_right = 14
content_margin_bottom = 14

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_2"]
bg_color = Color(1, 1, 1, 0.06)
border_color = Color(1, 1, 1, 0.10)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
corner_radius_top_left = 8
corner_radius_top_right = 8
corner_radius_bottom_left = 8
corner_radius_bottom_right = 8
content_margin_left = 10
content_margin_top = 10
content_margin_right = 10
content_margin_bottom = 10

[node name="VendingMachineOverlay" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 0
visible = false
script = ExtResource("1")

[node name="Backdrop" type="ColorRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 0
color = Color(0, 0, 0, 0.35)

[node name="Panel" type="PanelContainer" parent="."]
layout_mode = 0
anchors_preset = 8
anchor_left = 0.22
anchor_top = 0.18
anchor_right = 0.78
anchor_bottom = 0.82
mouse_filter = 0
theme_override_styles/panel = SubResource("StyleBoxFlat_1")

[node name="VBox" type="VBoxContainer" parent="Panel"]
layout_mode = 2
size_flags_vertical = 3

[node name="Header" type="HBoxContainer" parent="Panel/VBox"]
layout_mode = 2

[node name="TitleLabel" type="Label" parent="Panel/VBox/Header"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
text = "Vending Machine"

[node name="CloseButton" type="Button" parent="Panel/VBox/Header"]
unique_name_in_owner = true
layout_mode = 2
text = "Close"

[node name="Tabs" type="TabContainer" parent="Panel/VBox"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3

[node name="Skills" type="VBoxContainer" parent="Panel/VBox/Tabs"]
layout_mode = 2
size_flags_vertical = 3

[node name="SkillsPanel" type="PanelContainer" parent="Panel/VBox/Tabs/Skills"]
layout_mode = 2
size_flags_vertical = 3
theme_override_styles/panel = SubResource("StyleBoxFlat_2")

[node name="SkillsVBox" type="VBoxContainer" parent="Panel/VBox/Tabs/Skills/SkillsPanel"]
	layout_mode = 2
	size_flags_vertical = 3

[node name="SearchBar" type="HBoxContainer" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox"]
	layout_mode = 2

[node name="QueryEdit" type="LineEdit" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/SearchBar"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_horizontal = 3
	placeholder_text = "Search skills…"

[node name="SearchButton" type="Button" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/SearchBar"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Search"

[node name="SortOption" type="OptionButton" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/SearchBar"]
	unique_name_in_owner = true
	layout_mode = 2
	tooltip_text = "Sort"
	custom_minimum_size = Vector2(120, 0)

[node name="SettingsButton" type="Button" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/SearchBar"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Settings"

[node name="ResultsSplit" type="HSplitContainer" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox"]
	layout_mode = 2
	size_flags_vertical = 3
	split_offset = 260

[node name="ResultsPanel" type="PanelContainer" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/ResultsSplit"]
	layout_mode = 2
	size_flags_horizontal = 3
	theme_override_styles/panel = SubResource("StyleBoxFlat_2")

[node name="ResultsList" type="ItemList" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/ResultsSplit/ResultsPanel"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_vertical = 3
	allow_reselect = true

[node name="DetailsPanel" type="PanelContainer" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/ResultsSplit"]
	layout_mode = 2
	size_flags_horizontal = 3
	theme_override_styles/panel = SubResource("StyleBoxFlat_2")

[node name="DetailsVBox" type="VBoxContainer" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/ResultsSplit/DetailsPanel"]
	layout_mode = 2
	size_flags_vertical = 3

[node name="DetailsText" type="RichTextLabel" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/ResultsSplit/DetailsPanel/DetailsVBox"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_vertical = 3
	bbcode_enabled = true
	fit_content = true
	scroll_active = true
	scroll_following = true

[node name="DetailControls" type="HBoxContainer" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/ResultsSplit/DetailsPanel/DetailsVBox"]
	layout_mode = 2

[node name="RepoTitleLabel" type="Label" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/ResultsSplit/DetailsPanel/DetailsVBox/DetailControls"]
	layout_mode = 2
	text = "Repo:"

[node name="RepoUrlLabel" type="Label" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/ResultsSplit/DetailsPanel/DetailsVBox/DetailControls"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_horizontal = 3
	clip_text = true
	text = ""

[node name="OpenRepoButton" type="Button" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/ResultsSplit/DetailsPanel/DetailsVBox/DetailControls"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Open"

[node name="InstallButton" type="Button" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/ResultsSplit/DetailsPanel/DetailsVBox/DetailControls"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Install"

[node name="Library" type="VBoxContainer" parent="Panel/VBox/Tabs"]
	layout_mode = 2
	size_flags_vertical = 3

[node name="LibraryPanel" type="PanelContainer" parent="Panel/VBox/Tabs/Library"]
	layout_mode = 2
	size_flags_vertical = 3
	theme_override_styles/panel = SubResource("StyleBoxFlat_2")

[node name="LibraryVBox" type="VBoxContainer" parent="Panel/VBox/Tabs/Library/LibraryPanel"]
	layout_mode = 2
	size_flags_vertical = 3

[node name="LibraryTop" type="HBoxContainer" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox"]
	layout_mode = 2

[node name="LibraryFilterEdit" type="LineEdit" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox/LibraryTop"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_horizontal = 3
	placeholder_text = "Filter installed skills…"

[node name="LibraryRefreshButton" type="Button" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox/LibraryTop"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Refresh"

[node name="LibraryOpenFolderButton" type="Button" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox/LibraryTop"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Open Folder"

[node name="LibrarySplit" type="HSplitContainer" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox"]
	layout_mode = 2
	size_flags_vertical = 3
	split_offset = 260

[node name="LibraryListPanel" type="PanelContainer" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox/LibrarySplit"]
	layout_mode = 2
	size_flags_horizontal = 3
	theme_override_styles/panel = SubResource("StyleBoxFlat_2")

[node name="LibraryList" type="ItemList" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox/LibrarySplit/LibraryListPanel"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_vertical = 3
	allow_reselect = true

[node name="LibraryDetailsPanel" type="PanelContainer" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox/LibrarySplit"]
	layout_mode = 2
	size_flags_horizontal = 3
	theme_override_styles/panel = SubResource("StyleBoxFlat_2")

[node name="LibraryDetailsVBox" type="VBoxContainer" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox/LibrarySplit/LibraryDetailsPanel"]
	layout_mode = 2
	size_flags_vertical = 3

[node name="LibraryDetailsText" type="RichTextLabel" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox/LibrarySplit/LibraryDetailsPanel/LibraryDetailsVBox"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_vertical = 3
	bbcode_enabled = true
	fit_content = true
	scroll_active = true
	scroll_following = true

[node name="LibraryActions" type="HBoxContainer" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox/LibrarySplit/LibraryDetailsPanel/LibraryDetailsVBox"]
	layout_mode = 2

[node name="LibraryStatusLabel" type="Label" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox/LibrarySplit/LibraryDetailsPanel/LibraryDetailsVBox/LibraryActions"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_horizontal = 3
	text = ""

[node name="LibraryUninstallButton" type="Button" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox/LibrarySplit/LibraryDetailsPanel/LibraryDetailsVBox/LibraryActions"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Uninstall"

[node name="LibraryTeachButton" type="Button" parent="Panel/VBox/Tabs/Library/LibraryPanel/LibraryVBox/LibrarySplit/LibraryDetailsPanel/LibraryDetailsVBox/LibraryActions"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Teach"

[node name="Footer" type="HBoxContainer" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox"]
	layout_mode = 2

[node name="StatusLabel" type="Label" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/Footer"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_horizontal = 3
	text = ""

[node name="PrevPageButton" type="Button" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/Footer"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Prev"

[node name="PageLabel" type="Label" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/Footer"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Page 1"

[node name="NextPageButton" type="Button" parent="Panel/VBox/Tabs/Skills/SkillsPanel/SkillsVBox/Footer"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Next"

[node name="SkillsMpSettingsPopup" type="PopupPanel" parent="."]
	unique_name_in_owner = true
	visible = false

[node name="SettingsPanel" type="PanelContainer" parent="SkillsMpSettingsPopup"]
	layout_mode = 2
	custom_minimum_size = Vector2(620, 360)
	theme_override_styles/panel = SubResource("StyleBoxFlat_1")

[node name="SettingsVBox" type="VBoxContainer" parent="SkillsMpSettingsPopup/SettingsPanel"]
	layout_mode = 2

[node name="SettingsTitle" type="Label" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox"]
	layout_mode = 2
	text = "SkillsMP Settings"

[node name="SettingsHint" type="Label" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox"]
	unique_name_in_owner = true
	layout_mode = 2
	autowrap_mode = 3
	text = "Register with the vendor and generate an API key (skillsmp.com). This key is saved per save slot. Proxy settings apply only to GitHub skill downloads."

[node name="SettingsFormPanel" type="PanelContainer" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox"]
	layout_mode = 2
	theme_override_styles/panel = SubResource("StyleBoxFlat_2")

[node name="SettingsForm" type="GridContainer" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox/SettingsFormPanel"]
	layout_mode = 2

[node name="TeachSkillPopup" type="PopupPanel" parent="."]
	unique_name_in_owner = true
	visible = false
	script = ExtResource("2")

[node name="TeachPanel" type="PanelContainer" parent="TeachSkillPopup"]
	layout_mode = 2
	custom_minimum_size = Vector2(720, 420)
	theme_override_styles/panel = SubResource("StyleBoxFlat_1")

[node name="TeachVBox" type="VBoxContainer" parent="TeachSkillPopup/TeachPanel"]
	layout_mode = 2

[node name="TeachTitle" type="Label" parent="TeachSkillPopup/TeachPanel/TeachVBox"]
	layout_mode = 2
	text = "Teach Skill"

[node name="TeachNpcRow" type="HBoxContainer" parent="TeachSkillPopup/TeachPanel/TeachVBox"]
	layout_mode = 2
	size_flags_vertical = 3

[node name="TeachPrevNpcButton" type="Button" parent="TeachSkillPopup/TeachPanel/TeachVBox/TeachNpcRow"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "<"

[node name="TeachPreviewContainer" type="SubViewportContainer" parent="TeachSkillPopup/TeachPanel/TeachVBox/TeachNpcRow"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_horizontal = 3
	stretch = true

[node name="TeachPreviewViewport" type="SubViewport" parent="TeachSkillPopup/TeachPanel/TeachVBox/TeachNpcRow/TeachPreviewContainer"]
	unique_name_in_owner = true
	size = Vector2i(360, 240)
	render_target_update_mode = 2

[node name="TeachPreviewRoot" type="Node3D" parent="TeachSkillPopup/TeachPanel/TeachVBox/TeachNpcRow/TeachPreviewContainer/TeachPreviewViewport"]
	unique_name_in_owner = true

[node name="TeachPreviewLight" type="DirectionalLight3D" parent="TeachSkillPopup/TeachPanel/TeachVBox/TeachNpcRow/TeachPreviewContainer/TeachPreviewViewport"]
	light_energy = 1.4
	rotation = Vector3(-0.85, -0.9, 0.0)

[node name="TeachPreviewCamera" type="Camera3D" parent="TeachSkillPopup/TeachPanel/TeachVBox/TeachNpcRow/TeachPreviewContainer/TeachPreviewViewport"]
	unique_name_in_owner = true
	position = Vector3(0, 1.1, 2.2)

[node name="TeachNextNpcButton" type="Button" parent="TeachSkillPopup/TeachPanel/TeachVBox/TeachNpcRow"]
	unique_name_in_owner = true
	layout_mode = 2
	text = ">"

[node name="TeachNpcNameLabel" type="Label" parent="TeachSkillPopup/TeachPanel/TeachVBox"]
	unique_name_in_owner = true
	layout_mode = 2
	text = ""

[node name="TeachStatusLabel" type="Label" parent="TeachSkillPopup/TeachPanel/TeachVBox"]
	unique_name_in_owner = true
	layout_mode = 2
	text = ""

[node name="TeachActions" type="HBoxContainer" parent="TeachSkillPopup/TeachPanel/TeachVBox"]
	layout_mode = 2

[node name="TeachCancelButton" type="Button" parent="TeachSkillPopup/TeachPanel/TeachVBox/TeachActions"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Cancel"

[node name="TeachLearnButton" type="Button" parent="TeachSkillPopup/TeachPanel/TeachVBox/TeachActions"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_horizontal = 3
	text = "Teach"
	columns = 2

[node name="SettingsBaseUrlLabel" type="Label" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox/SettingsFormPanel/SettingsForm"]
	layout_mode = 2
	text = "Base URL"

[node name="SettingsBaseUrlEdit" type="LineEdit" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox/SettingsFormPanel/SettingsForm"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_horizontal = 3
	custom_minimum_size = Vector2(520, 0)
	placeholder_text = "https://skillsmp.com"

[node name="SettingsApiKeyLabel" type="Label" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox/SettingsFormPanel/SettingsForm"]
	layout_mode = 2
	text = "API key"

[node name="SettingsApiKeyEdit" type="LineEdit" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox/SettingsFormPanel/SettingsForm"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_horizontal = 3
	custom_minimum_size = Vector2(520, 0)
	secret = true
	placeholder_text = "sk_live_..."

[node name="SettingsHttpProxyLabel" type="Label" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox/SettingsFormPanel/SettingsForm"]
	layout_mode = 2
	text = "HTTP Proxy"

[node name="SettingsHttpProxyEdit" type="LineEdit" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox/SettingsFormPanel/SettingsForm"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_horizontal = 3
	custom_minimum_size = Vector2(520, 0)
	placeholder_text = "http://127.0.0.1:7897"

[node name="SettingsHttpsProxyLabel" type="Label" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox/SettingsFormPanel/SettingsForm"]
	layout_mode = 2
	text = "HTTPS Proxy"

[node name="SettingsHttpsProxyEdit" type="LineEdit" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox/SettingsFormPanel/SettingsForm"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_horizontal = 3
	custom_minimum_size = Vector2(520, 0)
	placeholder_text = "https://127.0.0.1:7897"

[node name="SettingsControls" type="HBoxContainer" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox"]
	layout_mode = 2

[node name="SettingsSaveButton" type="Button" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox/SettingsControls"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Save"

[node name="SettingsTestButton" type="Button" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox/SettingsControls"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Test"

[node name="SettingsCloseButton" type="Button" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox/SettingsControls"]
	unique_name_in_owner = true
	layout_mode = 2
	text = "Close"

[node name="SettingsStatusLabel" type="Label" parent="SkillsMpSettingsPopup/SettingsPanel/SettingsVBox/SettingsControls"]
	unique_name_in_owner = true
	layout_mode = 2
	size_flags_horizontal = 3
	text = ""
